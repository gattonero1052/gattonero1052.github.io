{"version":3,"sources":["webpack:///./src/components/Tree/tree.jsx","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/utils/js_utils.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/EnterLeaveCounter.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/BrowserDetector.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/MonotonicInterpolant.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/OffsetUtils.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/NativeTypes.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/nativeTypesConfig.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/getDataFromDataTransfer.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/NativeDragSource.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/index.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/OptionsReader.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/HTML5Backend.js","webpack:///./node_modules/react-dnd-html5-backend/dist/esm/index.js","webpack:///./node_modules/lodash/union.js","webpack:///./node_modules/lodash/noop.js"],"names":["TreeLevelsArray","TreeLevel","level","accept","nodes","lastDroppedItem","onDrop","refresh","addTagsCb","useDrop","drop","collect","monitor","isOver","canDrop","isActive","className","ref","map","node","TreeNode","key","id","inputRef","React","createRef","MAX_DEPTH","TAGS_OUTSIDE","useDrag","item","name","value","type","end","dropResult","getDropResult","isTreeTitle","tags","cur","push","parent","addChild","isTemp","i","children","length","splice","isDragging","drag","opacity","color","getColor","_domObject","style","flex","_spaceCount","isFake","defaultValue","input","autoFocus","onKeyPress","e","onDoubleClick","TreeTitle","toggleTree","onClick","Tree","args","state","displayPanel","root","getTree","forceRefresh","lines","rootId","filteringTags","getBlogSetting","componentDidMount","this","refreshTree","tree","props","refreshBinder","bind","refreshTagList","setState","getTreeNodes","setBlogSetting","dispatch","removeTagCb","tag","filter","t","componentDidUpdate","prevProps","prevState","snapshot","setTree","getLines","data","firsrOrderTraverseFind","getTreeArray","render","nodes2d","display","line","strokeWidth","x1","start","x","y1","y","x2","y2","stroke","tagItemClass","margin","draggable","nodes1d","concat","Component","Symbol","isArguments","isArray","spreadableSymbol","isConcatSpreadable","undefined","module","exports","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","array","iteratee","comparator","index","includes","isCommon","result","seen","set","outer","computed","seenIndex","arrayPush","isFlattenable","baseFlatten","depth","predicate","isStrict","Set","noop","values","memoize","fn","_defineProperties","target","descriptor","enumerable","configurable","writable","Object","defineProperty","EnterLeaveCounter","isNodeInDocument","instance","Constructor","TypeError","_classCallCheck","entered","protoProps","staticProps","enteringNode","_this","previousLength","itemsA","itemsB","insertItem","add","forEach","union","contains","leavingNode","items","prototype","isFirefox","test","navigator","userAgent","isSafari","Boolean","window","safari","MonotonicInterpolant","xs","ys","indexes","sort","a","b","dx","dy","dys","dxs","ms","_i","c1s","_i2","m2","mNext","dxNext","common","m","c2s","c3s","_i3","c1","invDx","_common","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","getEventClientOffset","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","nodeName","document","documentElement","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","_getDragPreviewSize","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","_nativeTypesConfig","FILE","URL","TEXT","getDataFromDataTransfer","dataTransfer","typesToTry","reduce","resultSoFar","typeToTry","getData","_defineProperty","obj","nativeTypesConfig","exposeProperties","files","Array","slice","call","matchesTypes","urls","split","text","NativeDragSource","config","keys","property","get","console","warn","_this2","newProperties","defineProperties","handle","getSourceId","matchNativeItemType","dataTransferTypes","types","nativeItemType","some","indexOf","OptionsReader","globalContext","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread","arguments","source","getOwnPropertyDescriptors","HTML5Backend","manager","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","getSourceClientOffset","sourceId","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","beginDrag","publishSource","nativeType","setDragImage","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","captureDraggingState","publishDragSource","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","enterLeaveCounter","enter","handleTopDragEnter","altKey","hover","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","leave","handleTopDropCapture","mutateItemByReadingDataTransfer","reset","handleTopDrop","handleSelectStart","dragDrop","tagName","isContentEditable","options","getActions","getMonitor","getRegistry","__isReactDndBackendSetUp","Error","addEventListeners","removeEventListeners","cancelAnimationFrame","delete","_this3","handleDragStart","setAttribute","addEventListener","removeEventListener","_this4","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","itemType","getItemType","createNativeDragSource","addSource","_this5","clearTimeout","unshift","context","baseRest","baseUniq","isArrayLikeObject","arrays"],"mappings":"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","file":"0a1100930ac6090dcc5ec96f2c27ba8be99eb86f-60120ff09f322364d5fe.js","sourcesContent":["import React, {useState, useCallback} from 'react'\r\nimport './tree.css'\r\nimport {getColor, PostListTags, TAGS_OUTSIDE} from \"../Tags/Tags\";\r\nimport {useDrag, useDrop} from 'react-dnd'\r\nimport {addChild,firsrOrderTraverseFind, getTreeArray, getLines, generate} from './treehelper'\r\nimport _ from 'lodash'\r\nimport {getTree,setTree,getBlogSetting,setBlogSetting} from \"../Data/localstorage\";\r\n\r\nconst MAX_DEPTH = 4\r\n\r\n\r\nconst TreeLevels = {\r\n  ONE: '1',\r\n  TWO: '2',\r\n  THREE: '3',\r\n  FOUR: '4',\r\n  FIVE: '5',\r\n}\r\n\r\nconst TreeLevelsArray = [TreeLevels.ONE, TreeLevels.TWO, TreeLevels.THREE, TreeLevels.FOUR]\r\n\r\n\r\nconst TreeLevel = ({level, accept, lastDroppedItem, onDrop, nodes, refresh,addTagsCb}) => {\r\n  const [{isOver, canDrop}, drop] = useDrop({\r\n    accept,\r\n    drop: () => ({\r\n      level\r\n    }),\r\n    collect: monitor => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  })\r\n\r\n  const isActive = canDrop && isOver\r\n\r\n  return (\r\n    <div className={`nodes-horizontal ${isActive?'blink':''}`}\r\n         ref={drop}>\r\n      {nodes.map(node => (\r\n        <TreeNode refresh={refresh} node={node} key={node.id} addTagsCb={addTagsCb}/>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TreeNode = ({node, refresh,addTagsCb}) => {\r\n  let inputRef = React.createRef()\r\n  const onKeyPressTemp = e => {\r\n    if (e.key == 'Enter') {\r\n      node.value = inputRef.value || '-'\r\n      node.isTemp = 0\r\n      refresh()\r\n    }\r\n  }\r\n\r\n  const onDoubleClickNode = e=>{\r\n    node.isTemp = 1\r\n    refresh()\r\n  }\r\n\r\n  const [{isOver, canDrop}, drop] = useDrop({\r\n    accept:node.level===MAX_DEPTH-1?[]:[TAGS_OUTSIDE],\r\n    drop: () => ({\r\n      node\r\n    }),\r\n    collect: monitor => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  })\r\n\r\n  const [{isDragging}, drag] = useDrag({\r\n    item: {name: node.value, type: TreeLevelsArray[node.level]},\r\n    end: (item, monitor) => {\r\n      const dropResult = monitor.getDropResult()\r\n\r\n      //dragged to title\r\n      if(item && dropResult && dropResult.isTreeTitle){\r\n        //get node and it's parents\r\n        let tags = [], cur = node\r\n        while(cur.id!='root'){\r\n          tags.push(cur.value)\r\n          cur = cur.parent\r\n        }\r\n\r\n        addTagsCb(tags)\r\n        return\r\n      }\r\n\r\n      //removed to another level\r\n      if (item && dropResult) {\r\n        if(dropResult.level>node.level){\r\n          let child = addChild(node,'')\r\n          child.isTemp = 1\r\n          refresh()\r\n        }else if (dropResult.level<node.level){\r\n          let i = 0\r\n          for (; i < node.parent.children.length; i++) {\r\n            if (node === node.parent.children[i]) break;\r\n          }\r\n\r\n          node.parent.children.splice(i,1)\r\n          refresh()\r\n        }\r\n      }\r\n    },\r\n    collect: monitor => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })\r\n\r\n  const isActive = canDrop && isOver\r\n\r\n  const opacity = isDragging ? 0.4 : (isActive?.2:1)\r\n\r\n  const color = getColor(node.value)\r\n\r\n\r\n  return (\r\n    <div ref={ref=>node._domObject = ref} className='nodes-node' style={{flex: node._spaceCount || 1}}>\r\n      {node.isFake?'':\r\n        <div ref={drag} className='tag-item' style={{opacity, color}}>\r\n          <div ref={drop}>\r\n          {node.isTemp ?\r\n            <div className='tree-node-input'>\r\n              <input type=\"text\" defaultValue={node.value} ref={input => inputRef = input} autoFocus={true} onKeyPress={onKeyPressTemp}/>\r\n            </div>\r\n            :\r\n            <div onDoubleClick={onDoubleClickNode}>{node.value}</div>\r\n          }\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TreeTitle = ({toggleTree})=>{\r\n  const [{isOver, canDrop}, drop] = useDrop({\r\n    accept:TreeLevelsArray,\r\n    drop: () => ({isTreeTitle:true}),\r\n    collect: monitor => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  })\r\n\r\n  return (<div className='tree-title' ref={drop} onClick={toggleTree}>Tree</div>)\r\n}\r\n\r\nclass Tree extends React.Component {\r\n  state = {\r\n    displayPanel: false,\r\n    nodes: []\r\n  }\r\n\r\n  constructor(...args) {\r\n    super(...args)\r\n    let root = getTree()\r\n\r\n    this.state = {\r\n      forceRefresh:false,\r\n      nodes:[],\r\n      lines: [],\r\n      root,\r\n      rootId: 'root',\r\n      filteringTags:getBlogSetting('filteringTags')\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.refreshTree({tree: this.state.root, id: 'root'})\r\n\r\n    //bind refresh back\r\n    this.props.refreshBinder({\r\n      refreshTree:this.refresh.bind(this),\r\n      refreshTagList:this.refreshTagList.bind(this)\r\n    })\r\n  }\r\n\r\n  refresh(){\r\n    this.refreshTree({tree: this.state.root, id: this.state.rootId})\r\n  }\r\n\r\n  refreshTagList({filteringTags}){\r\n    this.setState({\r\n      filteringTags\r\n    })\r\n  }\r\n\r\n  refreshTree({tree, id}) {\r\n    this.setState({\r\n      forceRefresh:!this.state.forceRefresh,\r\n      nodes: this.getTreeNodes({\r\n        tree, id\r\n      })\r\n    })\r\n  }\r\n  //add a specified tag and it's parent tags\r\n  addTagsCb(tags){\r\n    let filteringTags = _.union(this.state.filteringTags,tags)\r\n    this.refreshTagList({filteringTags})\r\n    setBlogSetting({filteringTags})\r\n    this.props.dispatch('refreshArticleList',{filteringTags})\r\n  }\r\n\r\n\r\n  removeTagCb(tag){\r\n    let filteringTags = this.state.filteringTags = this.state.filteringTags.filter(t=>t!==tag)\r\n    this.refreshTagList({filteringTags})\r\n    setBlogSetting({filteringTags})\r\n    this.props.dispatch('refreshArticleList',{filteringTags})\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevState.displayPanel != this.state.displayPanel || prevState.forceRefresh!=this.state.forceRefresh) {\r\n      setTree(this.state.root)\r\n\r\n      let lines = getLines(this.state.nodes[0][0])\r\n\r\n      this.setState({lines})\r\n    }\r\n  }\r\n\r\n  getTreeNodes(data) {\r\n    let node = firsrOrderTraverseFind(data.tree, data.id)\r\n    if (!node) return\r\n    let nodes = getTreeArray(node, MAX_DEPTH)\r\n    return nodes\r\n  }\r\n\r\n\r\n  toggleTree() {\r\n    this.setState({\r\n      displayPanel: !this.state.displayPanel\r\n    })\r\n  }\r\n\r\n  render() {\r\n    let nodes2d = this.state.nodes || []\r\n    return (\r\n      <div className=''>\r\n        <svg className='tree-svg' style={{\r\n          display: this.state.displayPanel ? 'inherit' : 'none'\r\n        }}>\r\n          {this.state.lines.map((line,i) => (\r\n            <line key={i} strokeWidth='10' x1={line.start.x} y1={line.start.y} x2={line.end.x} y2={line.end.y} stroke={line.color}/>\r\n          ))}\r\n        </svg>\r\n        <div className='tree-wrapper'>\r\n          <div className='tree'>\r\n            <TreeTitle toggleTree={this.toggleTree.bind(this)}/>\r\n            <div className='tree-filtering-tags'>\r\n              <PostListTags tagItemClass={{margin:'5px 5px'}} draggable={false} tags={this.state.filteringTags} removeTagCb={this.removeTagCb.bind(this)}/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='tree-panel' style={{\r\n          display: this.state.displayPanel ? 'flex' : 'none'\r\n        }}>\r\n          <div className='tree-body'>\r\n            <div className='tree-content'>\r\n              {nodes2d.map((nodes1d, i) => (\r\n                <TreeLevel level={i} refresh={this.refresh.bind(this)} addTagsCb = {this.addTagsCb.bind(this)}\r\n                           key={i} nodes={nodes1d} accept={\r\n                  [].concat(i > 0 ? TreeLevelsArray[i - 1] : [])\r\n                  .concat(i <TreeLevelsArray.length-1 ? TreeLevelsArray[i + 1] : [])}/>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Tree\r\n\r\n\r\n\r\n\r\n\r\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","// cheap lodash replacements\nexport function memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nexport function union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport { union, without } from './utils/js_utils';\n\nvar EnterLeaveCounter =\n/*#__PURE__*/\nfunction () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck(this, EnterLeaveCounter);\n\n    this.entered = [];\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();\n\nexport { EnterLeaveCounter as default };","import { memoize } from './utils/js_utils';\nexport var isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nexport var isSafari = memoize(function () {\n  return Boolean(window.safari);\n});","import \"core-js/modules/es.array.sort.js\";\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar MonotonicInterpolant =\n/*#__PURE__*/\nfunction () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck(this, MonotonicInterpolant);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dys = [];\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      dys.push(dy);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();\n\nexport { MonotonicInterpolant as default };","import { isSafari, isFirefox } from './BrowserDetector';\nimport MonotonicInterpolant from './MonotonicInterpolant';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientOffset(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  return node.nodeName === 'IMG' && (isFirefox() || !document.documentElement.contains(node));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}","export var FILE = '__NATIVE_FILE__';\nexport var URL = '__NATIVE_URL__';\nexport var TEXT = '__NATIVE_TEXT__';","var _nativeTypesConfig;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as NativeTypes from '../NativeTypes';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer';\nexport var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, NativeTypes.FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nexport var NativeDragSource =\n/*#__PURE__*/\nfunction () {\n  function NativeDragSource(config) {\n    var _this = this;\n\n    _classCallCheck(this, NativeDragSource);\n\n    this.config = config;\n    this.item = {};\n    Object.keys(this.config.exposeProperties).forEach(function (property) {\n      Object.defineProperty(_this.item, property, {\n        configurable: true,\n        enumerable: true,\n        get: function get() {\n          // eslint-disable-next-line no-console\n          console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n          return null;\n        }\n      });\n    });\n  }\n\n  _createClass(NativeDragSource, [{\n    key: \"mutateItemByReadingDataTransfer\",\n    value: function mutateItemByReadingDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      var newProperties = {};\n\n      if (dataTransfer) {\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes)\n          };\n        });\n      }\n\n      Object.defineProperties(this.item, newProperties);\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();","import { nativeTypesConfig } from './nativeTypesConfig';\nimport { NativeDragSource } from './NativeDragSource';\nexport function createNativeDragSource(type) {\n  return new NativeDragSource(nativeTypesConfig[type]);\n}\nexport function matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nexport var OptionsReader =\n/*#__PURE__*/\nfunction () {\n  function OptionsReader(globalContext) {\n    _classCallCheck(this, OptionsReader);\n\n    this.globalContext = globalContext;\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }]);\n\n  return OptionsReader;\n}();","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nimport EnterLeaveCounter from './EnterLeaveCounter';\nimport { isFirefox } from './BrowserDetector';\nimport { getNodeClientOffset, getEventClientOffset, getDragPreviewOffset } from './OffsetUtils';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources';\nimport * as NativeTypes from './NativeTypes';\nimport { OptionsReader } from './OptionsReader';\n\nvar HTML5Backend =\n/*#__PURE__*/\nfunction () {\n  function HTML5Backend(manager, globalContext) {\n    var _this = this;\n\n    _classCallCheck(this, HTML5Backend);\n\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.sourceNodes = new Map();\n    this.sourceNodeOptions = new Map();\n    this.dragStartSourceIds = null;\n    this.dropTargetIds = [];\n    this.dragEnterTargetIds = [];\n    this.currentNativeSource = null;\n    this.currentNativeHandle = null;\n    this.currentDragSourceNode = null;\n    this.altKeyPressed = false;\n    this.mouseMoveTimeoutTimer = null;\n    this.asyncEndDragFrameId = null;\n    this.dragOverTargetIds = null;\n\n    this.getSourceClientOffset = function (sourceId) {\n      return getNodeClientOffset(_this.sourceNodes.get(sourceId));\n    };\n\n    this.endDragNativeItem = function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      _this.registry.removeSource(_this.currentNativeHandle);\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    };\n\n    this.isNodeInDocument = function (node) {\n      // Check the node either in the main document or in the current context\n      return _this.document && _this.document.body && document.body.contains(node);\n    };\n\n    this.endDragIfSourceWasRemovedFromDOM = function () {\n      var node = _this.currentDragSourceNode;\n\n      if (_this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode()) {\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragStartCapture = function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    };\n\n    this.handleTopDragStart = function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer.setData('application/json', {});\n        } catch (err) {} // IE doesn't support MIME types in setData\n        // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    };\n\n    this.handleTopDragEndCapture = function () {\n      if (_this.clearCurrentDragSourceNode()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    };\n\n    this.handleTopDragEnterCapture = function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType);\n      }\n    };\n\n    this.handleTopDragEnter = function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      if (!isFirefox()) {\n        // Don't emit hover in `dragenter` on Firefox due to an edge case.\n        // If the target changes position as the result of `dragenter`, Firefox\n        // will still happily dispatch `dragover` despite target being no longer\n        // there. The easy solution is to only fire `hover` in `dragover` on FF.\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    };\n\n    this.handleTopDragOverCapture = function () {\n      _this.dragOverTargetIds = [];\n    };\n\n    this.handleTopDragOver = function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n\n      _this.actions.hover(dragOverTargetIds || [], {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    };\n\n    this.handleTopDragLeaveCapture = function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      }\n    };\n\n    this.handleTopDropCapture = function (e) {\n      _this.dropTargetIds = [];\n      e.preventDefault();\n\n      if (_this.isDraggingNativeItem()) {\n        _this.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer);\n      }\n\n      _this.enterLeaveCounter.reset();\n    };\n\n    this.handleTopDrop = function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else {\n        _this.endDragIfSourceWasRemovedFromDOM();\n      }\n    };\n\n    this.handleSelectStart = function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    };\n\n    this.options = new OptionsReader(globalContext);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  } // public for test\n\n\n  _createClass(HTML5Backend, [{\n    key: \"setup\",\n    value: function setup() {\n      if (this.window === undefined) {\n        return;\n      }\n\n      if (this.window.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      this.window.__isReactDndBackendSetUp = true;\n      this.addEventListeners(this.window);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.window === undefined) {\n        return;\n      }\n\n      this.window.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.window);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        this.window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        return _this5.window && _this5.window.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.window) {\n          this.window.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.window.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }]);\n\n  return HTML5Backend;\n}();\n\nexport { HTML5Backend as default };","import HTML5Backend from './HTML5Backend';\nimport * as NativeTypes from './NativeTypes';\nexport { getEmptyImage } from './getEmptyImage';\nexport { NativeTypes };\n\nvar createHTML5Backend = function createHTML5Backend(manager, context) {\n  return new HTML5Backend(manager, context);\n};\n\nexport default createHTML5Backend;","var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n"],"sourceRoot":""}